(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3994],{4081:function(e,s,l){Promise.resolve().then(l.bind(l,502))},502:function(e,s,l){"use strict";l.d(s,{default:function(){return m}});var r=l(7437),n=l(2265),t=l(6934),a=l(1513);let i=[{validator:a.Z.username(),component:"",defaultValue:"",slug:"country",name:"country",props:{placeholder:"Country"},type:"select",options:[{name:"",value:""},{name:"",value:""}]},{type:"inputgroup",containerClassNames:"flex gap-2 ",classNames:"w-full",children:[{validator:a.Z.username(),component:"",defaultValue:"",slug:"first_name",name:"First Name",props:{placeholder:"First Name"},type:"textinput"},{validator:a.Z.username(),component:"",defaultValue:"",slug:"last_name",name:"Last Name",props:{placeholder:"Last Name"},type:"textinput"}]},{validator:a.Z.username(),component:"",defaultValue:"",slug:"street_address",name:"Street Address",props:{placeholder:"Street Address"},type:"textarea"},{validator:a.Z.username(),component:"",defaultValue:"",slug:"address",name:"Address",props:{placeholder:"Address"},type:"textarea"},{validator:a.Z.username(),component:"",defaultValue:"",slug:"po_box",name:"PO Box",props:{children:"PO Box"},type:"checkbox"},{type:"inputgroup",containerClassNames:"flex gap-2 ",classNames:"w-full",children:[{validator:a.Z.username(),component:"",defaultValue:"",slug:"city",name:"City",props:{placeholder:"City"},type:"textinput"},{validator:a.Z.username(),component:"",defaultValue:"",slug:"province",name:"Province",props:{placeholder:"Province"},type:"textinput"}]},{type:"inputgroup",containerClassNames:"flex gap-2 ",classNames:"w-full",children:[{validator:a.Z.username(),component:"",defaultValue:"",slug:"postal_code",name:"Postal Code",props:{placeholder:"Postal Code"},type:"textinput"},{validator:a.Z.username(),component:"",defaultValue:"",slug:"mobile_number",name:"Mobile Number",props:{placeholder:"Mobile Number"},type:"textinput"}]}];function c(e){let{cancel:s,submit:l,defaultValues:n={}}=e,a=(0,t.B$)(i,"",[],n,s,l);return(0,r.jsx)(r.Fragment,{children:a.formComponent})}var o=l(8771),u=l(1444);function d(){let e=(0,u.I0)(),[s,l]=(0,n.useState)({}),[t,a]=(0,n.useState)("list"),i=(0,u.v9)(e=>e.account.addresses),d=()=>{a("list")},m=e=>{l(e)};return(0,n.useEffect)(()=>{console.log("getFormValues",s),Object.keys(s).length>0&&"add"==t&&(e((0,o.y$)(s)),a("list"))},[s]),(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)("h2",{className:"text-2xl my-2",children:"Delivery Addresses"})}),(0,r.jsx)("div",{className:"",children:"list"==t?(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("div",{className:"",children:i&&i.length>0?(0,r.jsx)("button",{className:"text-sm my-2",onClick:()=>{a("add")},children:"+Add Address"}):null}),(0,r.jsx)("div",{className:"my-4",children:i&&i.length>0?(0,r.jsx)("div",{className:"",children:i.map((s,n)=>(0,r.jsxs)("div",{className:"flex gap-4 border px-6 py-5",children:[(0,r.jsxs)("div",{className:"flex-1 w-full",children:[(0,r.jsxs)("div",{className:"",children:[s.first_name," ",s.last_name]}),(0,r.jsx)("div",{className:"",children:s.address1}),(0,r.jsx)("div",{className:""})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:" ",onClick:()=>{a("edit"),l(s)},children:"Edit"})," |",(0,r.jsx)("button",{className:" ",onClick:()=>{e((0,o.Ro)(n))},children:"Remove"})]})]},"k-".concat(n)))}):(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)("p",{className:"text-sm my-2",children:"No address avaialable, please add a delivery address."})}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("button",{className:"text-sm my-2",onClick:()=>{a("add")},children:"+Add Address"})})]})})]}):null}),(0,r.jsx)("div",{className:"",children:"add"==t?(0,r.jsx)("div",{className:"",children:(0,r.jsx)(c,{cancel:d,submit:m})}):null}),(0,r.jsx)("div",{className:"",children:"edit"==t?(0,r.jsx)("div",{className:"",children:(0,r.jsx)(c,{cancel:d,submit:m,defaultValues:s})}):null})]})})}var m=function(e){let{children:s}=e;return(0,u.v9)(e=>e.account.page),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d,{})})}},5537:function(e,s,l){"use strict";var r=l(7437);s.Z=function(e){let{children:s,f:l,className:n,...t}=e,a=" ".concat((()=>{let e=[];return l&&(e.push("flex"),l.includes("h")&&e.push("items-center"),l.includes("v")&&e.push("justify-center"),l.includes("fc")&&e.push("flex-col"),l.includes("fr")&&e.push("flex-row")),e.join(" ")})()," ").concat(n||""," ");return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:" ".concat(a," "),...t,children:s})})}},2930:function(e,s,l){"use strict";var r=l(7437);let n=(0,l(2265).forwardRef)(function(e,s){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("input",{className:"px-4 py-3 w-full rounded-lg ",ref:e.iref,...e})})})});function t(e){let{children:s,className:l,placeholder:n,...t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("input",{className:l||"",placeholder:n||"",...t})})}s.Z=function(e){return(null==e?void 0:e.iref)?(0,r.jsx)(n,{...e}):(0,r.jsx)(t,{...e})}},6638:function(e,s,l){"use strict";var r=l(7437);s.Z=function(e){let{children:s,...l}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("li",{...l,children:s})})}},7858:function(e,s,l){"use strict";var r=l(7437);s.Z=function(e){let{children:s,...l}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("ul",{...l,children:s})})}},4518:function(e,s,l){"use strict";var r=l(7437),n=l(2930),t=l(5537),a=l(7858),i=l(6638);s.Z=function(e){var s,l;let{children:c,helper:o,...u}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(t.Z,{children:[(0,r.jsxs)(t.Z,{f:"frh",className:"gap-2 my-2",children:[(0,r.jsx)(n.Z,{type:"radio",iref:null==o?void 0:o.ref,onChange:null==o?void 0:o.onChange,...u}),c]}),Array.isArray(null==o?void 0:o.errors)&&(null==o?void 0:null===(s=o.errors)||void 0===s?void 0:s.length)>0?(0,r.jsx)(a.Z,{className:"flex-col m-1 text-sm text-red-700",children:(null==o?void 0:o.errors)&&(null==o?void 0:null===(l=o.errors)||void 0===l?void 0:l.map((e,s)=>(0,r.jsx)(i.Z,{className:"mt-1",children:e},"k-".concat(s))))}):null]})})}},5575:function(e,s,l){"use strict";var r=l(7437),n=l(5537),t=l(7858),a=l(6638),i=l(2930);s.Z=function(e){var s,l;let{children:c,type:o,placeholder:u,helper:d,...m}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.Z,{f:"c",className:"flex-col mb-6",children:[(0,r.jsx)(i.Z,{className:"px-4 py-3 w-full rounded-lg border",placeholder:u||"",iref:d.ref,...m,onBlur:d.onChange}),Array.isArray(null==d?void 0:d.errors)&&(null==d?void 0:null===(s=d.errors)||void 0===s?void 0:s.length)>0?(0,r.jsx)(t.Z,{className:"flex-col m-1 text-sm text-red-700",children:(null==d?void 0:d.errors)&&(null==d?void 0:null===(l=d.errors)||void 0===l?void 0:l.map((e,s)=>(0,r.jsx)(a.Z,{className:"mt-1",children:e},"k-".concat(s))))}):null]})})}},1513:function(e,s,l){"use strict";var r=l(9772);class n{static username(){return r.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:"Username must only contains letters, numbers hyphen and underscore."})}static password(){return r.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-\W]+$/.test(e),{message:""})}static firstName(){return r.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static lastName(){return r.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static email(){return r.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static phoneNumber(){return r.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static address(){return r.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}}s.Z=n},6934:function(e,s,l){"use strict";l.d(s,{B$:function(){return v},SL:function(){return h}});var r=l(7437),n=l(2265),t=l(9772),a=l(5575),i=l(4518),c=l(2930),o=l(5537),u=l(7858),d=l(6638),m=function(e){var s,l;let{children:n,helper:t,...a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(o.Z,{f:"frh",className:"gap-2 my-2",children:[(0,r.jsx)(c.Z,{type:"checkbox",iref:t.ref,onChange:t.onChange,...a}),n]}),Array.isArray(null==t?void 0:t.errors)&&(null==t?void 0:null===(s=t.errors)||void 0===s?void 0:s.length)>0?(0,r.jsx)(u.Z,{className:"flex-col m-1 text-sm text-red-700",children:(null==t?void 0:t.errors)&&(null==t?void 0:null===(l=t.errors)||void 0===l?void 0:l.map((e,s)=>(0,r.jsx)(d.Z,{className:"mt-1",children:e},"k-".concat(s))))}):null]})})};let p=e=>{let{component:s,...l}=e;return"textinput"==s?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z,{...l})}):"radio"==s?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Z,{...l})}):"checkbox"==s?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m,{...l})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z,{...l})})},x=(e,s)=>{let[l,r]=(0,n.useState)(null),[t,a]=(0,n.useState)([]),i=(0,n.useRef)(null),c=()=>{if(s){var e,l;let r=s.safeParse(i.current.value);return a((null==r?void 0:null===(l=r.error)||void 0===l?void 0:null===(e=l.format())||void 0===e?void 0:e._errors)||[]),(null==r?void 0:r.success)||!1}return!1};return Object.freeze({ref:i,onChange:e=>{c()&&r(e)},getValue:()=>{var e;return null==i?void 0:null===(e=i.current)||void 0===e?void 0:e.value},validate:c,validator:s,errors:t,setErrors:a})},h=(e,s)=>{let l=Object.keys(e),r=(()=>{let s={};return l.forEach(l=>{s[l]=x(l,e[l])}),s})();return{form:r,validate:()=>{let e={},s={};l.forEach(l=>{e[l]=r[l].getValue(),s[l]=r[l].validator,r[l].validate()});let n=t.z.object(s).safeParse(e);return(null==n?void 0:n.success)||!1},getValues:()=>{let e={};return l.forEach(s=>{e[s]=r[s].getValue()}),e}}},v=(e,s,l,n,a,i)=>{let c={},o=[],u=n?Object.keys(n):[];console.log(u),e.forEach(e=>{if("object"==typeof e&&"string"==typeof(null==e?void 0:e.slug)&&e.slug&&"inputgroup"!==e.type)c[e.slug]=x(e.slug,e.validator),u.includes(e.slug)&&(e.props.defaultValue=n[e.slug]),o.push((0,r.jsx)(p,{helper:c[e.slug],component:e.type,...e.props}));else if("inputgroup"==e.type){let s=[];e.children.forEach(e=>{!Array.isArray(e)&&"object"==typeof e&&"string"==typeof(null==e?void 0:e.slug)&&e.slug&&(c[e.slug]=x(e.slug,e.validator),u.includes(e.slug)&&(e.props.defaultValue=n[e.slug]),s.push((0,r.jsx)(p,{helper:c[e.slug],component:e.type,...e.props})))}),o.push((0,r.jsx)("div",{className:e.containerClassNames,children:s.map((s,l)=>(0,r.jsx)("div",{className:e.classNames,children:s},"k-".concat(l)))}))}});let d=(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl my-6",children:s}),(0,r.jsxs)("form",{children:[o.map((e,s)=>(0,r.jsx)("div",{children:e},"k-".concat(s))),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[a&&(0,r.jsx)("button",{className:"border px-6 py-3 rounded-full",onClick:a,children:"Cancel"}),i&&(0,r.jsx)("button",{className:"border px-6 py-3 rounded-full",onClick:()=>{i(m())},children:"Submit"})]})]})]}),m=()=>{let e=Object.keys(c),s={};return e.forEach(e=>{s[e]=c[e].getValue()}),s};return{formComponent:d,form:c,validate:()=>{var e;let s=Object.keys(c),r={},n={};s.forEach(e=>{r[e]=c[e].getValue(),n[e]=c[e].validator,c[e].validate()});let a=t.z.object(n);l.forEach(e=>{a=a.refine(e.check,e.ctx)});let i=a.safeParse(r),o=null==i?void 0:null===(e=i.error)||void 0===e?void 0:e.format();return s.forEach(e=>{if(null==o?void 0:o.hasOwnProperty(e)){var s;c[e].setErrors((null===(s=o[e])||void 0===s?void 0:s._errors)||[])}}),(null==i?void 0:i.success)||!1},getValues:m}}}},function(e){e.O(0,[1444,928,9772,8771,2971,7023,1744],function(){return e(e.s=4081)}),_N_E=e.O()}]);