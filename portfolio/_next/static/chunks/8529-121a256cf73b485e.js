(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8529],{8529:function(e,r,n){Promise.resolve().then(n.bind(n,7222))},7222:function(e,r,n){"use strict";n.d(r,{default:function(){return f}});var s=n(7437),t=n(1444),l=n(8771),a=n(9266),i=n(5537),u=n(5575),o=n(6934),c=n(6463),d=n(2265),m=n(9840),h=n(724),v=n(1513);function f(e){let{createAccount:r=!0}=e,n=(0,t.I0)(),f=(0,h.w)(1);(0,t.v9)(e=>e.base.url);let x=(0,t.v9)(e=>e.account.loggedIn),p=(0,t.v9)(e=>{var r;return Object.keys((null==e?void 0:null===(r=e.cart)||void 0===r?void 0:r.cart)||{}).length}),g=(0,c.useRouter)();(0,d.useEffect)(()=>{x&&(p>0?g.push("".concat(f,"/checkout")):f.endsWith("admin")?g.push("".concat(f,"/")):g.push("".concat(f,"/account")))},[x]);let{form:j,validate:y,getValues:Z}=(0,o.SL)({username:v.Z.username(),password:v.Z.password()});return(0,s.jsx)(d.Suspense,{fallback:(0,s.jsx)(m.Z,{}),children:(0,s.jsx)("div",{className:"flex items-center justify-center mt-16",children:(0,s.jsxs)("div",{className:"w-[90%] max-w-[470px] mx-auto",children:[(0,s.jsx)("div",{className:"mb-5 text-2xl bold",children:(0,s.jsx)("h2",{children:"Sign into your account"})}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(u.Z,{placeholder:"Username",helper:j.username})}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(u.Z,{placeholder:"Password",helper:j.password})}),(0,s.jsx)("div",{className:"text-right text-sm mb-8",children:(0,s.jsx)(a.Z,{href:"/test/forgot-password",children:"Forgot your password?"})}),(0,s.jsx)("div",{className:"text-right mb-10",children:(0,s.jsx)("button",{className:"border rounded-full px-4 py-2 w-full",onClick:()=>{if(y()){let e=Z();console.log("signIn signIn signIn",e),n((r,n,s)=>{var t;let{api:l,setLoggedIn:a,setLoggedOut:i,setUser:u}=s,o=null===(t=n())||void 0===t?void 0:t.account,c=!1;Array.isArray(o.users)&&o.users.forEach(r=>{(null==e?void 0:e.username)&&(null==e?void 0:e.password)&&(null==r?void 0:r.username)==(null==e?void 0:e.username)&&(null==r?void 0:r.password)==(null==e?void 0:e.password)&&(c=!0)}),console.log("state",o,c),c&&a&&(r(a()),r(u(e)))}),n((0,l.br)({id:Math.random().toString(),text:Math.random().toString()}))}},children:"Sign In"})}),r&&(0,s.jsx)("div",{className:"text-center mb-2",children:(0,s.jsxs)(i.Z,{f:"v",className:"mb-2 gap-2",children:[(0,s.jsx)("h2",{children:"Don't have any account?"}),(0,s.jsx)(a.Z,{className:"",href:"".concat(f,"/sign-up"),onClick:e=>{e.preventDefault(),g.push("".concat(f,"/sign-up"))},children:"Create Account."})]})})]})})})}},9266:function(e,r,n){"use strict";var s=n(7437);r.Z=function(e){let{children:r,className:n,...t}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("a",{className:" text-emerald-700 ".concat(n," "),...t,children:r})})}},5537:function(e,r,n){"use strict";var s=n(7437);r.Z=function(e){let{children:r,f:n,className:t,...l}=e,a=" ".concat((()=>{let e=[];return n&&(e.push("flex"),n.includes("h")&&e.push("items-center"),n.includes("v")&&e.push("justify-center"),n.includes("fc")&&e.push("flex-col"),n.includes("fr")&&e.push("flex-row")),e.join(" ")})()," ").concat(t||""," ");return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:" ".concat(a," "),...l,children:r})})}},2930:function(e,r,n){"use strict";var s=n(7437);let t=(0,n(2265).forwardRef)(function(e,r){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"",children:(0,s.jsx)("input",{className:"px-4 py-3 w-full rounded-lg ",ref:e.iref,...e})})})});function l(e){let{children:r,className:n,placeholder:t,...l}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("input",{className:n||"",placeholder:t||"",...l})})}r.Z=function(e){return(null==e?void 0:e.iref)?(0,s.jsx)(t,{...e}):(0,s.jsx)(l,{...e})}},6638:function(e,r,n){"use strict";var s=n(7437);r.Z=function(e){let{children:r,...n}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("li",{...n,children:r})})}},7858:function(e,r,n){"use strict";var s=n(7437);r.Z=function(e){let{children:r,...n}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("ul",{...n,children:r})})}},9840:function(e,r,n){"use strict";n.d(r,{Z:function(){return t}});var s=n(7437);function t(e){let{}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"w-12 h-12 border-t-[#047857] border-[4px] rounded-[50%]",style:{animation:"loader-spinner 0.6s linear infinite"}})})}},4518:function(e,r,n){"use strict";var s=n(7437),t=n(2930),l=n(5537),a=n(7858),i=n(6638);r.Z=function(e){var r,n;let{children:u,helper:o,...c}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(l.Z,{f:"frh",className:"gap-2 my-2",children:[(0,s.jsx)(t.Z,{type:"radio",iref:null==o?void 0:o.ref,onChange:null==o?void 0:o.onChange,...c}),u]}),Array.isArray(null==o?void 0:o.errors)&&(null==o?void 0:null===(r=o.errors)||void 0===r?void 0:r.length)>0?(0,s.jsx)(a.Z,{className:"flex-col m-1 text-sm text-red-700",children:(null==o?void 0:o.errors)&&(null==o?void 0:null===(n=o.errors)||void 0===n?void 0:n.map((e,r)=>(0,s.jsx)(i.Z,{className:"mt-1",children:e},"k-".concat(r))))}):null]})})}},5575:function(e,r,n){"use strict";var s=n(7437),t=n(5537),l=n(7858),a=n(6638),i=n(2930);r.Z=function(e){var r,n;let{children:u,type:o,placeholder:c,helper:d,...m}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(t.Z,{f:"c",className:"flex-col mb-6",children:[(0,s.jsx)(i.Z,{className:"px-4 py-3 w-full rounded-lg border",placeholder:c||"",iref:d.ref,...m,onBlur:d.onChange}),Array.isArray(null==d?void 0:d.errors)&&(null==d?void 0:null===(r=d.errors)||void 0===r?void 0:r.length)>0?(0,s.jsx)(l.Z,{className:"flex-col m-1 text-sm text-red-700",children:(null==d?void 0:d.errors)&&(null==d?void 0:null===(n=d.errors)||void 0===n?void 0:n.map((e,r)=>(0,s.jsx)(a.Z,{className:"mt-1",children:e},"k-".concat(r))))}):null]})})}},6463:function(e,r,n){"use strict";var s=n(1169);n.o(s,"useParams")&&n.d(r,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(r,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(r,{useRouter:function(){return s.useRouter}})},1513:function(e,r,n){"use strict";var s=n(9772);class t{static username(){return s.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:"Username must only contains letters, numbers hyphen and underscore."})}static password(){return s.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-\W]+$/.test(e),{message:""})}static firstName(){return s.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static lastName(){return s.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static email(){return s.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static phoneNumber(){return s.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}static address(){return s.z.string().min(5).max(50).refine(e=>/^[a-zA-Z-0-9_-]+$/.test(e),{message:""})}}r.Z=t},6934:function(e,r,n){"use strict";n.d(r,{B$:function(){return x},SL:function(){return f}});var s=n(7437),t=n(2265),l=n(9772),a=n(5575),i=n(4518),u=n(2930),o=n(5537),c=n(7858),d=n(6638),m=function(e){var r,n;let{children:t,helper:l,...a}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.Z,{children:[(0,s.jsxs)(o.Z,{f:"frh",className:"gap-2 my-2",children:[(0,s.jsx)(u.Z,{type:"checkbox",iref:l.ref,onChange:l.onChange,...a}),t]}),Array.isArray(null==l?void 0:l.errors)&&(null==l?void 0:null===(r=l.errors)||void 0===r?void 0:r.length)>0?(0,s.jsx)(c.Z,{className:"flex-col m-1 text-sm text-red-700",children:(null==l?void 0:l.errors)&&(null==l?void 0:null===(n=l.errors)||void 0===n?void 0:n.map((e,r)=>(0,s.jsx)(d.Z,{className:"mt-1",children:e},"k-".concat(r))))}):null]})})};let h=e=>{let{component:r,...n}=e;return"textinput"==r?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.Z,{...n})}):"radio"==r?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.Z,{...n})}):"checkbox"==r?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m,{...n})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.Z,{...n})})},v=(e,r)=>{let[n,s]=(0,t.useState)(null),[l,a]=(0,t.useState)([]),i=(0,t.useRef)(null),u=()=>{if(r){var e,n;let s=r.safeParse(i.current.value);return a((null==s?void 0:null===(n=s.error)||void 0===n?void 0:null===(e=n.format())||void 0===e?void 0:e._errors)||[]),(null==s?void 0:s.success)||!1}return!1};return Object.freeze({ref:i,onChange:e=>{u()&&s(e)},getValue:()=>{var e;return null==i?void 0:null===(e=i.current)||void 0===e?void 0:e.value},validate:u,validator:r,errors:l,setErrors:a})},f=(e,r)=>{let n=Object.keys(e),s=(()=>{let r={};return n.forEach(n=>{r[n]=v(n,e[n])}),r})();return{form:s,validate:()=>{let e={},r={};n.forEach(n=>{e[n]=s[n].getValue(),r[n]=s[n].validator,s[n].validate()});let t=l.z.object(r).safeParse(e);return(null==t?void 0:t.success)||!1},getValues:()=>{let e={};return n.forEach(r=>{e[r]=s[r].getValue()}),e}}},x=(e,r,n,t,a,i)=>{let u={},o=[],c=t?Object.keys(t):[];console.log(c),e.forEach(e=>{if("object"==typeof e&&"string"==typeof(null==e?void 0:e.slug)&&e.slug&&"inputgroup"!==e.type)u[e.slug]=v(e.slug,e.validator),c.includes(e.slug)&&(e.props.defaultValue=t[e.slug]),o.push((0,s.jsx)(h,{helper:u[e.slug],component:e.type,...e.props}));else if("inputgroup"==e.type){let r=[];e.children.forEach(e=>{!Array.isArray(e)&&"object"==typeof e&&"string"==typeof(null==e?void 0:e.slug)&&e.slug&&(u[e.slug]=v(e.slug,e.validator),c.includes(e.slug)&&(e.props.defaultValue=t[e.slug]),r.push((0,s.jsx)(h,{helper:u[e.slug],component:e.type,...e.props})))}),o.push((0,s.jsx)("div",{className:e.containerClassNames,children:r.map((r,n)=>(0,s.jsx)("div",{className:e.classNames,children:r},"k-".concat(n)))}))}});let d=(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl my-6",children:r}),(0,s.jsxs)("form",{children:[o.map((e,r)=>(0,s.jsx)("div",{children:e},"k-".concat(r))),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[a&&(0,s.jsx)("button",{className:"border px-6 py-3 rounded-full",onClick:a,children:"Cancel"}),i&&(0,s.jsx)("button",{className:"border px-6 py-3 rounded-full",onClick:()=>{i(m())},children:"Submit"})]})]})]}),m=()=>{let e=Object.keys(u),r={};return e.forEach(e=>{r[e]=u[e].getValue()}),r};return{formComponent:d,form:u,validate:()=>{var e;let r=Object.keys(u),s={},t={};r.forEach(e=>{s[e]=u[e].getValue(),t[e]=u[e].validator,u[e].validate()});let a=l.z.object(t);n.forEach(e=>{a=a.refine(e.check,e.ctx)});let i=a.safeParse(s),o=null==i?void 0:null===(e=i.error)||void 0===e?void 0:e.format();return r.forEach(e=>{if(null==o?void 0:o.hasOwnProperty(e)){var r;u[e].setErrors((null===(r=o[e])||void 0===r?void 0:r._errors)||[])}}),(null==i?void 0:i.success)||!1},getValues:m}}},724:function(e,r,n){"use strict";n.d(r,{w:function(){return l}});var s=n(6463),t=n(1444);let l=function(){var e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,s.usePathname)(),l=(0,t.v9)(e=>{var r;return(null==e?void 0:null===(r=e.base)||void 0===r?void 0:r.url)||""});if(r<1)return l;let a=null==n?void 0:null===(e=n.split("/"))||void 0===e?void 0:e.filter(e=>(null==e?void 0:e.trim())!="");return a.length<1?l:"".concat(l,"/").concat(a[0])}}}]);